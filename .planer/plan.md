# AI 基金交易 Agent 开发计划 (Phase 3)

## 1. 概述

在第二阶段的基础上，本项目将引入详细的决策日志记录和历史数据回测功能。这将允许我们理解模型的决策逻辑，并量化评估交易策略在历史数据上的表现。

## 2. 架构设计变更

*   **`models/`**:
    *   `base_model.py`: `predict` 方法的返回值将从 `str` 变更为 `tuple[str, str]`，以同时返回决策和理由。
    *   `simple_model.py`, `llm_model.py`: 将更新以符合新的 `predict` 接口。
*   **`trading_agent/`**:
    *   `agent.py`: `run` 方法将更新以处理和存储包含决策理由的更丰富的结果。
*   **`backtester/`**:
    *   `backtester.py`: 新增一个回测模块，负责模拟历史交易并评估策略性能。
*   **`main.py`**:
    *   将引入命令行参数（使用 `argparse`）来选择运行模式：`run`（获取当前决策）或 `backtest`（执行历史回测）。

## 3. 技术栈更新

*   **命令行接口**: `argparse` (标准库)

## 4. 开发策略

1.  **日志先行**: 首先，重构现有模型以提供决策理由。
2.  **TDD回测**: 其次，通过测试驱动开发的方式构建回测框架，先定义回测的预期行为，再编写代码实现。